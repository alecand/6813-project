<!DOCTYPE html>

<!--
  Alec Anderson, Alex Latham, Emanuele Ceccarelli, Vineel Chakradhar (listed reluctantly)
-->
<html>

<head>
<meta charset="UTF-8">
<title>eFormations</title>

<!-- Load style sheets -->
<link rel="stylesheet" href="mainLayout.css" />
</head>

<body>

<!-- TODO we could do this using divs if the exact pixel spacing is an issue...-->
<table id="mainTable">
    <table id="mainMenu">
        <td>
            Menu is here
        <td>
    </table>
  <!--   <table id="middle">
        <td>
            <tr id="formationWindow">
                formation sidebar here
            </tr> -->
<!--             <tr id="centerWindow">
            </tr> -->
    <table>
            <div id = "middle" style = "width:100%">
                <div id ="formationWindow" style = "float:left; width: 20%; height: 600px;">
                    Formation sidebar here
                </div>
                <div id = "centerWindow" style = "float:left; width: 60%; height: 600px;">
                    <div id="dancerWindow" style = "height: 85%; width: 100%;"> 
                        
                    </div>
                    <div id="centerNotesWindow" style = "height: 15%; width: 100%;">
                        Notes here
                    </div>
                </div>
                <div id = "rosterWindow" style = "float:left; width: 20%; height: 600px;">
                    Roster window here
                </div>
            </div>
    </table>
<!--             <tr id="rosterWindow">
                roster window here
            </tr>
        </td>
    </table> -->
    <table id="musicWindow" style="width: 100%; height: 100px">
        <td style="clear: left;">
            Music window here
        </td>
    </table>

</table>


<!-- Load any supplemental Javascript libraries here -->
<script type="text/javascript" src="external_js/jquery-1.9.0.min.js"></script>

<script type="text/javascript">
//This script extracts parameters from the URL
//from jquery-howto.blogspot.com
    // $.extend({
    //     getUrlVars : function() {
    //         var vars = [], hash;
    //         var hashes = window.location.href.slice(
    //                 window.location.href.indexOf('?') + 1).split('&');
    //         for ( var i = 0; i < hashes.length; i++) {
    //             hash = hashes[i].split('=');
    //             vars.push(hash[0]);
    //             vars[hash[0]] = hash[1];
    //         }
    //         return vars;
    //     },
    //     getUrlVar : function(name) {
    //         return $.getUrlVars()[name];
    //     }
    // });

    // This allows the Javascript code inside this block to only run when the page
    // has finished loading in the browser.
    
    $(document).ready(function() {
        // Loads on page load

        //Varaibles for dragging
        var _startX = 0;            // mouse starting positions
        var _startY = 0;
        var _offsetX = 0;           // current element offset
        var _offsetY = 0;
        var _dragElement;           // to store target of mousedown (what's being dragged)
        

        
        document.getElementById("dancerWindow").addEventListener("mousedown", OnMouseDown);
        document.getElementById("dancerWindow").addEventListener("mouseup", OnMouseUp);
        addDancerObject();  

        
        //Drag function for dancer objects in center pane.
        function OnMouseDown(e)
        {
            var target = e.target;
            
            if ((e.button == 0) && 
                (target.className == 'dancerObject'))  
            {
                
                // grab the mouse position
                _startX = e.clientX;
                _startY = e.clientY;
                
                // grab the clicked element's position
                _offsetX = parseInt(target.offsetLeft);
                _offsetY = parseInt(target.offsetTop);

                _dragElement = target;

                document.onmousemove = OnMouseMove;
                return false;
                
            }
        }

        //Drag function for dancer objects in center pane.
        function OnMouseMove(e)
        {
            if (e == null) 
                var e = window.event; 
            
            _dragElement.style.left = (e.clientX - _startX) + 'px';
            _dragElement.style.top = (e.clientY - _startY) + 'px';   
            
        }
        

        //Drag function for dancer objects in center pane.
        function OnMouseUp(e)
        {
            if (_dragElement != null)
            {
                //Need to check that dragged dancer is within center window
                    
                // } else {
                //     _dragElement.style.left = 0 + 'px';
                //     _dragElement.style.top =  0 + 'px'; 
                // }
                document.onmousemove = null;
                _dragElement = null;
            }
        }

        function addDancerObject() {
            var img = document.createElement('img');
            img.src = "./red-piece.png";    
            img.className = "dancerObject";
            img.onmousedown = OnMouseDown;

            document.getElementById("dancerWindow").appendChild(img);
        }
        });


</script>

</body>

</html>
